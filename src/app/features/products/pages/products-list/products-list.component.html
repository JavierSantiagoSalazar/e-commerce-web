<div class="products-page">
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Productos</h1>
      <button class="btn-new-product" routerLink="/products/new">
        <span class="material-symbols-outlined">add</span>
        Nuevo Producto
      </button>
    </div>
  </div>

  <app-product-filters (filtersChanged)="onFiltersChanged($event)"></app-product-filters>

  <div class="loading-container" *ngIf="isLoading">
    <div class="loading-spinner"></div>
    <p class="loading-text">Cargando productos...</p>
  </div>

  <div class="error-container" *ngIf="error && !isLoading">
    <span class="material-symbols-outlined error-icon">error</span>
    <h3>Error al cargar productos</h3>
    <p>{{ error }}</p>
    <button class="btn-retry" (click)="loadProducts()">
      <span class="material-symbols-outlined">refresh</span>
      Reintentar
    </button>
  </div>

  <div class="products-grid" *ngIf="!isLoading && !error && products.length > 0">
    <app-product-card
      *ngFor="let product of products"
      [product]="product"
      (productDeleted)="onDeleteProduct($event)">
    </app-product-card>
  </div>

  <!-- Pagination Info -->
  <div class="pagination-info" *ngIf="!isLoading && !error && products.length > 0">
    <p>Mostrando {{ products.length }} de {{ totalElements }} productos (PÃ¡gina {{ currentPage + 1 }} de {{ totalPages }})</p>
  </div>

  <!-- Pagination Controls -->
  <div class="pagination-container" *ngIf="!isLoading && !error && totalPages > 1">
    <button
      class="pagination-btn"
      [disabled]="currentPage === 0"
      (click)="onPageChange(currentPage - 1)">
      <span class="material-symbols-outlined">chevron_left</span>
      Anterior
    </button>

    <div class="pagination-pages">
      <button
        *ngFor="let page of getPageNumbers()"
        class="pagination-page"
        [class.active]="page === currentPage"
        (click)="onPageChange(page)">
        {{ page + 1 }}
      </button>
    </div>

    <button
      class="pagination-btn"
      [disabled]="currentPage >= totalPages - 1"
      (click)="onPageChange(currentPage + 1)">
      Siguiente
      <span class="material-symbols-outlined">chevron_right</span>
    </button>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && !error && products.length === 0">
    <span class="material-symbols-outlined empty-icon">inventory_2</span>
    <h3>No hay productos</h3>
    <p>Comienza agregando tu primer producto</p>
    <button class="btn-new-product" routerLink="/products/new">
      <span class="material-symbols-outlined">add</span>
      Nuevo Producto
    </button>
  </div>
</div>
